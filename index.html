<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>XS SUPER APP</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg: radial-gradient(1200px 800px at 10% 10%, #2dd4bf30 0%, #0ea5e920 40%, #8b5cf620 70%, #000 100%),
            linear-gradient(135deg, #0f172a 0%, #020617 60%);
      --glass: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.04));
      --stroke: rgba(255,255,255,.14);
      --glow: 0 10px 30px rgba(59,130,246,.35), inset 0 0 0 1px rgba(255,255,255,.06);
      --brand: #60a5fa;
      --brand2:#22d3ee;
      --text:#E6EDF6;
      --muted:#9AA4B2;
      --ok:#22c55e; --warn:#eab308; --bad:#ef4444;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: Outfit, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      color:var(--text); background: var(--bg); overflow: hidden;
    }

    /* Layout */
    .shell{position:relative; min-height:100%; padding: clamp(16px, 3vw, 32px);} 
    .header{display:flex; align-items:center; justify-content:center; gap:16px; margin: clamp(8px,2vh,18px) 0 24px;}
    .logo{display:grid; place-items:center; width:56px; height:56px; border-radius:16px; background:var(--glass);
      backdrop-filter: blur(10px); box-shadow: var(--glow); border:1px solid var(--stroke)}
    .logo span{font-weight:800; letter-spacing:.5px; font-size:14px; background: linear-gradient(90deg, var(--brand), var(--brand2)); -webkit-background-clip:text; background-clip:text; color:transparent}

    h1.title{margin:0; font-size: clamp(28px, 5vw, 56px); letter-spacing:.5px; line-height:1;
      background: linear-gradient(90deg, #fff, #93c5fd 40%, #22d3ee 70%, #a78bfa);
      -webkit-background-clip:text; background-clip:text; color:transparent;
      filter: drop-shadow(0 10px 24px rgba(59,130,246,.25));
    }
    .subtitle{margin-top:6px; text-align:center; color:var(--muted)}

    .grid{display:grid; grid-template-columns: repeat(2, minmax(260px, 1fr)); gap: clamp(16px, 2.8vw, 28px); max-width:1100px; margin: 0 auto;}
    @media (max-width: 720px){ .grid{grid-template-columns: 1fr;} }

    .card{
      position:relative; overflow:hidden; border-radius:28px; padding:22px; min-height:180px; cursor:pointer;
      background: var(--glass); border:1px solid var(--stroke); box-shadow: var(--glow);
      transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease;
      isolation:isolate;
    }
    .card:hover{ transform: translateY(-4px); box-shadow: 0 20px 60px rgba(56,189,248,.25), inset 0 0 0 1px rgba(255,255,255,.16); border-color: rgba(255,255,255,.22) }
    .card:active{ transform: translateY(0) scale(.99) }

    .card .ink{ position:absolute; inset:-40%; background:
      radial-gradient(360px 280px at 20% 30%, rgba(96,165,250,.25), transparent 60%),
      radial-gradient(240px 200px at 80% 20%, rgba(34,211,238,.28), transparent 60%),
      radial-gradient(360px 280px at 60% 80%, rgba(167,139,250,.22), transparent 65%);
      filter: blur(26px); z-index:0;}

    .card h2{ position:relative; z-index:1; margin:12px 0 6px; font-size: clamp(22px, 3vw, 32px); }
    .card p{ position:relative; z-index:1; margin:0; color:var(--muted) }
    .badge{ position:absolute; right:18px; top:18px; z-index:1; font-size:12px; padding:6px 10px; border-radius:999px; background:rgba(34,211,238,.15); border:1px solid rgba(34,211,238,.35)}

    /* Screens */
    .screen{ position:fixed; inset:0; display:none; place-items:center; padding: clamp(16px, 3vw, 28px); backdrop-filter: blur(8px);
      background: radial-gradient(1200px 900px at 50% -10%, rgba(59,130,246,.15), transparent 40%), rgba(2,6,23,.75);
      z-index:50; }
    .screen.active{ display:grid; }
    .panel{ width:min(100%, 920px); background: var(--glass); border:1px solid var(--stroke); border-radius:28px;
      box-shadow: var(--glow); padding: clamp(12px, 2vw, 22px); }

    .panel-header{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:8px 6px 12px;}
    .panel-title{ font-weight:800; letter-spacing:.4px; font-size: clamp(18px, 2.2vw, 24px);}  
    .chip{ font-size:12px; padding:6px 10px; border-radius:999px; background: rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.14); }
    .btn{ all:unset; display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:14px; border:1px solid var(--stroke);
      background: var(--glass); cursor:pointer; transition: .2s ease; }
    .btn:hover{ border-color: rgba(255,255,255,.24) }

    .panel-body{ display:grid; gap:16px; grid-template-columns: 1fr 260px; }
    @media (max-width:960px){ .panel-body{ grid-template-columns: 1fr; }}

    /* Snake */
    .canvas-wrap{ display:grid; place-items:center; background: #020617; border:1px solid var(--stroke); border-radius:22px; padding:10px }
    canvas#snake{ width: min(92vw, 520px); aspect-ratio: 1/1; image-rendering: pixelated; }
    .hud{ display:flex; align-items:center; justify-content:space-between; gap:8px; flex-wrap:wrap; }
    .stat{ font-variant-numeric: tabular-nums; }
    .controls{ display:grid; grid-template-columns: repeat(3, 64px); grid-template-rows: repeat(3, 64px); gap:8px; place-items:center; justify-content:center; margin-top:6px; }
    .pad{ width:64px; height:64px; display:grid; place-items:center; border-radius:14px; border:1px solid var(--stroke); background: rgba(255,255,255,.06); cursor:pointer }
    .pad:active{ transform: scale(.98) }

    /* Puzzle */
    .puzzle{ width:min(92vw, 520px); aspect-ratio:1/1; display:grid; grid-template-columns: repeat(3, 1fr); gap:8px; padding:8px; background:#020617; border-radius:22px; border:1px solid var(--stroke) }
    .tile{ position:relative; display:grid; place-items:center; font-size: clamp(22px, 6vw, 36px); font-weight:800; border-radius:18px; user-select:none; cursor:pointer;
      background: linear-gradient(135deg, rgba(59,130,246,.25), rgba(34,211,238,.18));
      border:1px solid rgba(255,255,255,.14); box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
    }
    .tile.empty{ background: transparent; border:1px dashed rgba(255,255,255,.16); cursor:default }

    .footer{position:fixed; left:0; right:0; bottom:8px; text-align:center; color:var(--muted); font-size:12px}
    .kbd{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; background: rgba(255,255,255,.06); padding:2px 6px; border-radius:6px; border:1px solid rgba(255,255,255,.14)}
  </style>
</head>
<body>
  <div class="shell">
    <header class="header">
      <div class="logo"><span>XS</span></div>
      <div>
        <h1 class="title">XS SUPER APP</h1>
        <div class="subtitle">Pick a game to play. Clean UI ‚Ä¢ Works on mobile & desktop</div>
      </div>
    </header>

    <main class="grid">
      <article class="card" id="openSnake" tabindex="0" aria-label="Open Legends of Snake">
        <div class="ink"></div>
        <span class="badge">Arcade</span>
        <h2>LEGENDS OF SNAKE</h2>
        <p>Classic snake with smooth controls, score & speed ups.</p>
      </article>

      <article class="card" id="openPuzzle" tabindex="0" aria-label="Open Imagine 3√ó3">
        <div class="ink"></div>
        <span class="badge">Puzzle</span>
        <h2>IMAGINE 3√ó3</h2>
        <p>Slide the tiles into order. Clean, satisfying, solvable.</p>
      </article>
    </main>
  </div>

  <!-- Snake Screen -->
  <section class="screen" id="snakeScreen" aria-hidden="true">
    <div class="panel" role="dialog" aria-modal="true" aria-labelledby="snakeTitle">
      <div class="panel-header">
        <div class="panel-title" id="snakeTitle">LEGENDS OF SNAKE</div>
        <div class="hud">
          <span class="chip stat">Score: <b id="score">0</b></span>
          <span class="chip stat">Best: <b id="best">0</b></span>
          <span class="chip stat">Speed: <b id="speed">1√ó</b></span>
        </div>
        <div style="display:flex; gap:8px">
          <button class="btn" id="btnPause">‚è∏ Pause</button>
          <button class="btn" id="btnRestart">üîÑ Restart</button>
          <button class="btn" data-close="#snakeScreen">‚úï Close</button>
        </div>
      </div>
      <div class="panel-body">
        <div class="canvas-wrap">
          <canvas id="snake" width="480" height="480"></canvas>
        </div>
        <div>
          <div class="chip" style="margin-bottom:8px">Controls</div>
          <div style="color:var(--muted); font-size:14px; line-height:1.6">
            Use <span class="kbd">W A S D</span> or <span class="kbd">‚Üë ‚Üê ‚Üì ‚Üí</span>. On mobile, tap the pad.
          </div>
          <div class="controls" aria-hidden="false">
            <div></div>
            <button class="pad" data-dir="up">‚ñ≤</button>
            <div></div>
            <button class="pad" data-dir="left">‚óÄ</button>
            <button class="pad" data-dir="down">‚ñº</button>
            <button class="pad" data-dir="right">‚ñ∂</button>
            <div></div>
            <div></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Puzzle Screen -->
  <section class="screen" id="puzzleScreen" aria-hidden="true">
    <div class="panel" role="dialog" aria-modal="true" aria-labelledby="puzzleTitle">
      <div class="panel-header">
        <div class="panel-title" id="puzzleTitle">IMAGINE 3√ó3</div>
        <div class="hud">
          <span class="chip stat">Moves: <b id="moves">0</b></span>
          <span class="chip stat">Time: <b id="time">00:00</b></span>
        </div>
        <div style="display:flex; gap:8px">
          <button class="btn" id="btnShuffle">üîÄ Shuffle</button>
          <button class="btn" data-close="#puzzleScreen">‚úï Close</button>
        </div>
      </div>
      <div class="panel-body">
        <div class="puzzle" id="puzzle" aria-label="3 by 3 sliding puzzle"></div>
        <div>
          <div class="chip" style="margin-bottom:8px">How to play</div>
          <div style="color:var(--muted); font-size:14px; line-height:1.6">
            Tap a numbered tile next to the empty space to slide it. Arrange 1 ‚Üí 8 with the empty space at the end.
          </div>
        </div>
      </div>
    </div>
  </section>

  <div class="footer">Tip: Press <span class="kbd">Esc</span> to go back ‚Ä¢ Built for you ‚ú®</div>

  <script>
    /* ---------- Navigation */
    const snakeScreen = document.querySelector('#snakeScreen');
    const puzzleScreen = document.querySelector('#puzzleScreen');
    const openSnake = document.querySelector('#openSnake');
    const openPuzzle = document.querySelector('#openPuzzle');

    function open(screen){ screen.classList.add('active'); screen.setAttribute('aria-hidden', 'false'); }
    function close(screen){ screen.classList.remove('active'); screen.setAttribute('aria-hidden', 'true'); }

    document.querySelectorAll('[data-close]').forEach(btn=>{
      btn.addEventListener('click', (e)=>{
        const id = btn.getAttribute('data-close');
        const scr = document.querySelector(id);
        close(scr);
        if(scr===snakeScreen) snakeGame.reset(true);
        if(scr===puzzleScreen) stopTimer();
      });
    });

    openSnake.addEventListener('click', ()=>{ open(snakeScreen); snakeGame.start(); });
    openPuzzle.addEventListener('click', ()=>{ open(puzzleScreen); newGame(); });

    window.addEventListener('keydown', (e)=>{ if(e.key==='Escape'){ close(snakeScreen); close(puzzleScreen); } });

    /* ---------- Snake Game */
    const canvas = document.getElementById('snake');
    const ctx = canvas.getContext('2d');
    const scoreEl = document.getElementById('score');
    const bestEl  = document.getElementById('best');
    const speedEl = document.getElementById('speed');

    const S = 20; // cell size
    const CELLS = canvas.width / S;

    const snakeGame = (()=>{
      let snake, dir, food, loop, speed, score, best = +localStorage.getItem('xs_best')||0, alive=true, paused=false;
      bestEl.textContent = best;

      function init(){
        snake=[{x:10,y:10}];
        dir={x:1,y:0};
        food=spawnFood();
        speed=110; score=0; alive=true; paused=false; updateHUD();
        clearInterval(loop); loop=setInterval(tick, speed);
        draw();
      }
      function reset(silent){ clearInterval(loop); if(!silent) init(); }
      function start(){ init(); }

      function spawnFood(){
        let p; do{
          p={x:Math.floor(Math.random()*CELLS), y:Math.floor(Math.random()*CELLS)};
        }while(snake.some(s=>s.x===p.x&&s.y===p.y));
        return p;
      }

      function setDir(nx,ny){ if((-nx===dir.x && -ny===dir.y)) return; dir={x:nx,y:ny}; }

      function tick(){ if(paused||!alive) return; step(); draw(); }

      function step(){
        const head={x:snake[0].x+dir.x, y:snake[0].y+dir.y};
        // wrap around edges
        head.x=(head.x+CELLS)%CELLS; head.y=(head.y+CELLS)%CELLS;
        // collision with body
        if(snake.some((s,i)=>i&&s.x===head.x&&s.y===head.y)){ alive=false; gameOver(); return; }
        snake.unshift(head);
        if(head.x===food.x && head.y===food.y){
          score++; if(score%5===0 && speed>60){ speed-=5; clearInterval(loop); loop=setInterval(tick, speed); }
          speedEl.textContent = (110/speed).toFixed(1)+'√ó';
          food=spawnFood();
        } else { snake.pop(); }
        updateHUD();
      }

      function draw(){
        // bg
        ctx.fillStyle = '#0b1220'; ctx.fillRect(0,0,canvas.width,canvas.height);
        // grid (subtle)
        ctx.strokeStyle = 'rgba(255,255,255,.04)';
        ctx.lineWidth = 1;
        for(let i=0;i<=CELLS;i++){ ctx.beginPath(); ctx.moveTo(i*S,0); ctx.lineTo(i*S,canvas.height); ctx.stroke(); ctx.beginPath(); ctx.moveTo(0,i*S); ctx.lineTo(canvas.width,i*S); ctx.stroke(); }
        // food
        ctx.fillStyle = '#22d3ee'; ctx.fillRect(food.x*S+2, food.y*S+2, S-4, S-4);
        // snake
        snake.forEach((p,i)=>{
          const c = i===0? '#93c5fd' : '#60a5fa';
          ctx.fillStyle = c; ctx.fillRect(p.x*S+2, p.y*S+2, S-4, S-4);
        });
      }

      function updateHUD(){ scoreEl.textContent=score; bestEl.textContent=best; }
      function togglePause(){ paused=!paused; document.getElementById('btnPause').textContent = paused? '‚ñ∂ Resume':'‚è∏ Pause'; }

      function gameOver(){
        if(score>best){ best=score; localStorage.setItem('xs_best', best); }
        updateHUD();
        const msg = `Game Over! Score ${score}.`;
        document.getElementById('btnPause').textContent='‚è∏ Pause';
        paused=true;
        setTimeout(()=>{ alert(msg); paused=false; init(); }, 50);
      }

      return { start, reset, setDir, togglePause };
    })();

    // Keyboard + on-screen controls
    window.addEventListener('keydown', (e)=>{
      if(!snakeScreen.classList.contains('active')) return;
      const k=e.key.toLowerCase();
      if(k==='w'||e.key==='ArrowUp') snakeGame.setDir(0,-1);
      else if(k==='s'||e.key==='ArrowDown') snakeGame.setDir(0,1);
      else if(k==='a'||e.key==='ArrowLeft') snakeGame.setDir(-1,0);
      else if(k==='d'||e.key==='ArrowRight') snakeGame.setDir(1,0);
      else if(k===' '||k==='p') snakeGame.togglePause();
    });
    document.getElementById('btnPause').onclick = ()=> snakeGame.togglePause();
    document.getElementById('btnRestart').onclick = ()=> snakeGame.reset();
    document.querySelectorAll('.pad').forEach(b=> b.addEventListener('click', ()=>{
      const d=b.getAttribute('data-dir');
      const map={up:[0,-1],down:[0,1],left:[-1,0],right:[1,0]};
      snakeGame.setDir(...map[d]);
    }));

    /* ---------- 3x3 Sliding Puzzle */
    const puzzle = document.getElementById('puzzle');
    const movesEl = document.getElementById('moves');
    const timeEl  = document.getElementById('time');

    let state = [], moves=0, ticking=false, startTs=0, timerId;

    function stopTimer(){ ticking=false; clearInterval(timerId); }
    function startTimer(){ ticking=true; startTs=Date.now(); timerId=setInterval(()=>{
      const t = Math.floor((Date.now()-startTs)/1000); const m=String(Math.floor(t/60)).padStart(2,'0'); const s=String(t%60).padStart(2,'0'); timeEl.textContent=`${m}:${s}`;
    }, 250); }

    function inversions(arr){ let inv=0; for(let i=0;i<arr.length;i++) for(let j=i+1;j<arr.length;j++) if(arr[i]&&arr[j]&&arr[i]>arr[j]) inv++; return inv; }
    function solvable(arr){ return inversions(arr)%2===0; }

    function render(){
      puzzle.innerHTML='';
      state.forEach((n,idx)=>{
        const tile=document.createElement('div');
        tile.className='tile'+(n===0?' empty':'');
        tile.textContent=n||'';
        tile.setAttribute('data-idx', idx);
        tile.onclick=()=>move(idx);
        puzzle.appendChild(tile);
      });
    }

    function shuffle(){
      const arr=[1,2,3,4,5,6,7,8,0];
      do{ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; } }while(!solvable(arr) || isSolved(arr));
      state=arr; moves=0; movesEl.textContent=moves; timeEl.textContent='00:00'; stopTimer(); startTimer(); render();
    }

    function idxToRC(i){ return [Math.floor(i/3), i%3]; }
    function rcToIdx(r,c){ return r*3+c; }

    function move(i){
      const empty = state.indexOf(0);
      const [er,ec] = idxToRC(empty); const [r,c]=idxToRC(i);
      const dist = Math.abs(er-r)+Math.abs(ec-c);
      if(dist!==1) return; // must be adjacent
      [state[empty], state[i]] = [state[i], state[empty]];
      moves++; movesEl.textContent=moves; render();
      if(isSolved(state)){ stopTimer(); setTimeout(()=>alert(`Great! Solved in ${moves} moves, time ${timeEl.textContent}`), 120); }
    }

    function isSolved(arr){ return arr.every((v,i)=> v===((i+1)%9)); }

    function newGame(){ shuffle(); }

    document.getElementById('btnShuffle').addEventListener('click', shuffle);

    // Ready
    // (We create the puzzle only when opened)
  </script>
</body>
</html>
